<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
		xmlns:sec="http//www.thymeleaf.org/extras/spring-security">
<head>
<title>ì •ê¸°í›„ì›ì‹ ì²­</title>

<meta name="_csrf" th:content="${_csrf.token}" />
<meta name="_csrf_header" th:content="${_csrf.headerName}" />

<th:block th:replace="fragments/config :: head"></th:block>
<th:block th:replace="fragments/config :: configFragment"></th:block>


<th:block th:replace="fragments/config :: head" ></th:block>
<th:block th:replace="fragments/config :: configFragment" ></th:block>


<!-- contact css  -->
<link rel="stylesheet" th:href="@{~/css/style.css}">
<link rel="stylesheet" th:href="@{~/css/signup_mypage.css}">
<link rel="stylesheet" th:href="@{~/css/supportRequest.css}">

<!-- Material Icons -->
<link rel="stylesheet"
	href="https://fonts.googleapis.com/icon?family=Material+Icons">

<script th:inline="javascript">
	function loginForm(e) {
		alert('ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤')
		e.preventDefault();
		location.href = "/member/login"
	}
	
	
</script>


</head>

<body>

	<!-- Page Header-->
	<th:block th:replace="fragments/header :: headerFragment"></th:block>


<div class="breadcrumbs">
		<div class="container">
			<div class="row">
				<div class="col">
					<p class="bread">
						<span><a href="support.jsp">í›„ì›ì‹ ì²­</a></span> / <span>ì •ê¸°í›„ì›</span>
					</p>
				</div>
			</div>
		</div>
	</div>


	<h1 id="menuTitle">ì •ê¸°í›„ì›ì‹ ì²­</h1>

<div class="volReqFirstDiv">
		<div style="display: inline-block;">
		<!-- <p th:text="${#authentication.name}"></p> -->
			<table>
				<tr>
					<td style="display: flex;">
						<h4 style="width:100px">ê¸ˆì•¡&nbsp;&nbsp;</h4> <select name="temporary_amount"
							class="form-control input tem" id="kakaopay-amount" data-msg="ê¸ˆì•¡ì„ ì„ íƒí•´ ì£¼ì„¸ìš”"
							data-error-class="u-has-error" data-success-class="u-has-success">
							<option value="">ğŸ¶ğŸ±ğŸ¶ğŸ±</option>
							<option value="10000">10,000</option>
							<option value="30000">30,000</option>
							<option value="50000">50,000</option>
							<option value="100000">100,000</option>
							<option value="150000">150,000</option>
							<option value="200000">200,000</option>
							<option value="250000">250,000</option>
							<option value="300000">300,000</option>
						</select>
					</td>
				</tr>
				<tr>
					<!--loginForm(event) -->
					<td style="display:relative;top:30px" sec:authorize="isAnonymous()">
						<input type="submit" onclick="loginForm()" class="btn btn-primary del support"
							value="&nbsp;ë¡œê·¸ì¸ í•˜ê¸°&nbsp;">
					</td>
					<td style="display:relative;top:30px" sec:authorize="isAuthenticated()">
						<input type="submit" onclick="kakaopay()" class="btn btn-primary del support" value="&nbsp;í›„ì›í•˜ê¸°&nbsp;">
					</td>
			</table>
		</div>
		<h6 style="margin-bottom: 5em; color: #59595978;">ì¹´ì¹´ì˜¤í˜ì´ ê²°ì œ í˜ì´ì§€ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.</h6>
	</div>

	<hr style="margin-top: 0;">
	<th:block th:replace="fragments/supportTitle:: supporterTitle"></th:block>
	<!-- Page Footer-->
	<th:block th:replace="fragments/footer :: footerFragment"></th:block>
	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="ion-ios-arrow-up"></i></a>
	</div>


	<script th:inline="javascript">

		var kakaopay = function () {
			//POSTë°©ì‹ ë°ì´í„° ì „ì†¡ì— í•„ìš”í•œ CSRF í† í° ê°’ ì¡°íšŒ
			var token = $("meta[name='_csrf']").attr("content");
			var header = $("meta[name='_csrf_header']").attr("content");
			var url = "/regular/kakaopay"

			$.ajax({
				url: url,
				type: 'post',
				data: {
					amount: document.getElementById("kakaopay-amount").value,
					id: [[${#authentication.name}]]
					
				},
				/* ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì • */
				beforeSend: function (xhr) {
					xhr.setRequestHeader(header, token)
				},
				success: function (response) {
					if(response != "") {
						window.open(response.next_redirect_pc_url,"ì¹´ì¹´ì˜¤ ê²°ì œ",'scrollbars=yes,resizable=no width=500 height=600, left=50%,top=50%');
						//location.href = response.next_redirect_pc_url;
					}
					alert("í›„ì› ì¤‘ì…ë‹ˆë‹¤.");
			
					
				}

			})

		}

	</script>








<!-- 
	
	<hr>

	<div class="volReqFirstDiv">
		<div style="display: inline-block;">

			<form action="supportREGInsert.sp" method="post" name="frm"
				class="woocommerce-form woocommerce-form-register register">
				<div class="input-container">
					<label class="reg_signup">ì€í–‰&nbsp;</label> 
						<th:block th:replace="fragments/bankList :: BankList"></th:block>
				</div>
				<div class="input-container">
					<label class="reg_signup">ê³„ì¢Œë²ˆí˜¸&nbsp;</label> <input type="text"
						class="woocommerce-Input woocommerce-Input--text input-text"
						id="regular_account" name="regular_account">
				</div>
				<div class="input-container">
					<label class="reg_signup">ê¸ˆì•¡&nbsp;</label> <select
						name="regular_amount"
						class="woocommerce-Input woocommerce-Input--text input-text select"
						id="regular_amount">
						<option value="">ğŸŒ¼ í›„ì›ê¸ˆì•¡ì„ ì„ íƒí•´ ì£¼ì„¸ìš” ğŸŒ¼</option>
						<option value="">========================================</option>
						<option value="10,000">10,000</option>
						<option value="30,000">30,000</option>
						<option value="50,000">50,000</option>
						<option value="100,000">100,000</option>
						<option value="150,000">150,000</option>
						<option value="200,000">200,000</option>
						<option value="250,000">250,000</option>
						<option value="300,000">300,000</option>
					</select>
				</div>
				<div class="input-container">
					<label class="reg_signup">ì¶œê¸ˆì¼&nbsp;</label> <select
						name="regular_paymentDate"
						class="woocommerce-Input woocommerce-Input--text input-text select"
						id="regular_paymentDate">
						<option value="">ğŸŒ¼ ì¶œê¸ˆì¼ì„ ì„ íƒí•´ ì£¼ì„¸ìš” ğŸŒ¼</option>
						<option value="">========================================</option>
						<option value="05">ë§¤ì›” 05ì¼</option>
						<option value="10">ë§¤ì›” 10ì¼</option>
						<option value="17">ë§¤ì›” 17ì¼</option>
						<option value="25">ë§¤ì›” 25ì¼</option>
					</select>
				</div>

				<input type="submit" onClick="sendit(); return false;"
					class="btn btn-primary supprot" value="ì‹ ì²­í•˜ê¸°">
			</form>
		</div>
	</div>

	<hr>
	<th:block th:replace="fragments/supportTitle:: supporterTitle"></th:block>


	<script>
		function sendit() {
			let frm = document.frm;
			let regular_bank = frm.regular_bank;
			let regular_account = frm.regular_account;
			let regular_paymentDate = frm.regular_paymentDate;
			let checkString = /[-!%^@#$&*+.?]/gi;
			let supporter_id = "${supporter_id}";
			if (checkString.test(regular_amount.value)) {
				alert("íŠ¹ìˆ˜ë¬¸ìëŠ” ì…ë ¥í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!");
				regular_amount.focus();
				return false;
			}
			if (regular_bank.value == "") {
				alert("ì€í–‰ì„ ì„ íƒí•´ ì£¼ì„¸ìš”!");
				regular_bank.focus();
				return false;
			}
			if (regular_account.value == "") {
				alert("ê³„ì¢Œë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”!");
				regular_account.focus();
				return false;
			}
			if (regular_amount.value == "") {
				alert("í›„ì›ê¸ˆì•¡ì„ ì„ íƒí•´ ì£¼ì„¸ìš”!");
				regular_amount.focus();
				return false;
			}
			if (regular_paymentDate.value == "") {
				alert("ì¶œê¸ˆì¼ì„ ì„ íƒí•´ ì£¼ì„¸ìš”!");
				regular_paymentDate.focus();
				return false;
			}
			if (supporter_id == "") {
				alert("ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”!");
				return false;
			}
			frm.submit();
		}
	</script>
 -->

	<!-- Page Footer-->
	<th:block th:replace="fragments/footer :: footerFragment"></th:block>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="ion-ios-arrow-up"></i></a>
	</div>
	

	<script th:src="@{/js/loginCheck.js}"></script>
	<th:block th:replace="fragments/config :: jscript"></th:block>
</body>
</html>